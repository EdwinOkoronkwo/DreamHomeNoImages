{"ast":null,"code":"var _jsxFileName = \"C:\\\\CentennialCollege\\\\COMP214\\\\DreamHomeNoImages\\\\frontend\\\\src\\\\components\\\\branches\\\\BranchForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nfunction BranchForm({\n  branch = {},\n  method\n}) {\n  _s();\n  const [branchData, setBranchData] = useState(branch);\n  useEffect(() => {\n    setBranchData(branch);\n  }, [branch]);\n  async function handleSubmit(event) {\n    event.preventDefault();\n    try {\n      const url = `http://localhost:8000/api/branches/${branchData.branchno}`;\n      const response = await fetch(url, {\n        method: method || \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(branchData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        // Handle successful submission, like navigating to the updated branch\n        window.location.href = `/branches/${data.branch.branchno}`;\n      } else {\n        alert(data.message || \"Failed to process branch.\");\n      }\n    } catch (error) {\n      console.error(\"Error submitting branch:\", error);\n      alert(\"An error occurred while processing the branch.\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Branch No:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: branchData.branchno || \"\",\n        readOnly: method === \"PATCH\",\n        onChange: e => setBranchData({\n          ...branchData,\n          branchno: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Street:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: branchData.street || \"\",\n        onChange: e => setBranchData({\n          ...branchData,\n          street: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"City:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: branchData.city || \"\",\n        onChange: e => setBranchData({\n          ...branchData,\n          city: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Postcode:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: branchData.postcode || \"\",\n        onChange: e => setBranchData({\n          ...branchData,\n          postcode: e.target.value\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: method === \"PATCH\" ? \"Update Branch\" : \"Create Branch\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n}\n_s(BranchForm, \"NqPOziX8HheH00xOn5gnNoUDY6Q=\");\n_c = BranchForm;\nexport default BranchForm;\nimport { json, redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport async function action({\n  request,\n  params\n}) {\n  const method = request.method;\n  const formData = await request.formData();\n\n  // Extract branch data from formData\n  const branchData = {};\n  formData.forEach((value, key) => {\n    branchData[key] = value;\n  });\n  let url = \"http://localhost:8000/api/branches\";\n  if (method === \"PATCH\" && params.branchno) {\n    url += `/${params.branchno}`;\n  }\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\" // Ensure headers are set correctly for JSON\n      },\n      body: JSON.stringify(branchData) // Send data as JSON\n    });\n    if (response.status === 422) {\n      return response; // Return response to handle validation errors\n    }\n    if (!response.ok) {\n      throw new Error(\"Could not save branch\");\n    }\n    return redirect(\"/branches\");\n  } catch (error) {\n    console.error(error.message);\n    throw json({\n      message: \"Could not save branch\"\n    }, {\n      status: 500\n    });\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"BranchForm\");","map":{"version":3,"names":["React","useState","useEffect","BranchForm","branch","method","_s","branchData","setBranchData","handleSubmit","event","preventDefault","url","branchno","response","fetch","headers","body","JSON","stringify","data","json","ok","window","location","href","alert","message","error","console","_jsxDEV","onSubmit","children","type","value","readOnly","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","street","city","postcode","_c","redirect","jsxDEV","action","request","params","formData","forEach","key","status","Error","$RefreshReg$"],"sources":["C:/CentennialCollege/COMP214/DreamHomeNoImages/frontend/src/components/branches/BranchForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction BranchForm({ branch = {}, method }) {\n  const [branchData, setBranchData] = useState(branch);\n\n  useEffect(() => {\n    setBranchData(branch);\n  }, [branch]);\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const url = `http://localhost:8000/api/branches/${branchData.branchno}`;\n      const response = await fetch(url, {\n        method: method || \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(branchData),\n      });\n\n      const data = await response.json();\n      if (response.ok) {\n        // Handle successful submission, like navigating to the updated branch\n        window.location.href = `/branches/${data.branch.branchno}`;\n      } else {\n        alert(data.message || \"Failed to process branch.\");\n      }\n    } catch (error) {\n      console.error(\"Error submitting branch:\", error);\n      alert(\"An error occurred while processing the branch.\");\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Branch No:\n        <input\n          type=\"text\"\n          value={branchData.branchno || \"\"}\n          readOnly={method === \"PATCH\"}\n          onChange={(e) =>\n            setBranchData({ ...branchData, branchno: e.target.value })\n          }\n        />\n      </label>\n      <label>\n        Street:\n        <input\n          type=\"text\"\n          value={branchData.street || \"\"}\n          onChange={(e) =>\n            setBranchData({ ...branchData, street: e.target.value })\n          }\n        />\n      </label>\n      <label>\n        City:\n        <input\n          type=\"text\"\n          value={branchData.city || \"\"}\n          onChange={(e) =>\n            setBranchData({ ...branchData, city: e.target.value })\n          }\n        />\n      </label>\n      <label>\n        Postcode:\n        <input\n          type=\"text\"\n          value={branchData.postcode || \"\"}\n          onChange={(e) =>\n            setBranchData({ ...branchData, postcode: e.target.value })\n          }\n        />\n      </label>\n      {/* Add other fields as needed */}\n      <button type=\"submit\">\n        {method === \"PATCH\" ? \"Update Branch\" : \"Create Branch\"}\n      </button>\n    </form>\n  );\n}\n\nexport default BranchForm;\n\nimport { json, redirect } from \"react-router-dom\";\n\nexport async function action({ request, params }) {\n  const method = request.method;\n  const formData = await request.formData();\n\n  // Extract branch data from formData\n  const branchData = {};\n  formData.forEach((value, key) => {\n    branchData[key] = value;\n  });\n\n  let url = \"http://localhost:8000/api/branches\";\n  if (method === \"PATCH\" && params.branchno) {\n    url += `/${params.branchno}`;\n  }\n\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: {\n        \"Content-Type\": \"application/json\", // Ensure headers are set correctly for JSON\n      },\n      body: JSON.stringify(branchData), // Send data as JSON\n    });\n\n    if (response.status === 422) {\n      return response; // Return response to handle validation errors\n    }\n\n    if (!response.ok) {\n      throw new Error(\"Could not save branch\");\n    }\n\n    return redirect(\"/branches\");\n  } catch (error) {\n    console.error(error.message);\n    throw json({ message: \"Could not save branch\" }, { status: 500 });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}